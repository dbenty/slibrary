JGZpbGVzID0gc2NhbmRpcignLicpOwokZmlsZXMgPSBhcnJheV9kaWZmKCRmaWxlcywgYXJyYXkoJy4nLCAnLi4nKSk7CiRmaWxlRGV0YWlscyA9IFtdOwpmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGUpIHsKICAgICRmaWxlRGV0YWlsc1tdID0gWwogICAgICAgICduYW1lJyA9PiAkZmlsZSwKICAgICAgICAncGF0aCcgPT4gJy4vJyAuICRmaWxlLAogICAgICAgICdzaXplJyA9PiBmaWxlc2l6ZSgnLi8nIC4gJGZpbGUpLAogICAgICAgICdlZGl0YWJsZScgPT4gaXNfd3JpdGFibGUoJy4vJyAuICRmaWxlKSwKICAgIF07Cn0KZWNobyAnPGgyPuaWh+S7tuWIl+ihqDwvaDI+JzsKZWNobyAnPHVsPic7CmZvcmVhY2ggKCRmaWxlRGV0YWlscyBhcyAkZmlsZSkgewogICAgZWNobyAnPGxpPic7CiAgICBlY2hvICc8c3Ryb25nPicgLiAkZmlsZVsnbmFtZSddIC4gJzwvc3Ryb25nPiAtIOWkp+WwjzogJyAuICRmaWxlWydzaXplJ10gLiAnIOWtl+iKgic7CiAgICBpZiAoJGZpbGVbJ2VkaXRhYmxlJ10pIHsKICAgICAgICBlY2hvICcgPGEgaHJlZj0iP2FjdGlvbj1lZGl0JmZpbGU9JyAuIHVybGVuY29kZSgkZmlsZVsnbmFtZSddKSAuICciPue8lui+kTwvYT4nOwogICAgICAgIGVjaG8gJyA8YSBocmVmPSI/YWN0aW9uPWRlbGV0ZSZmaWxlPScgLiB1cmxlbmNvZGUoJGZpbGVbJ25hbWUnXSkgLiAnIj7liKDpmaQ8L2E+JzsKICAgIH0KICAgIGVjaG8gJzwvbGk+JzsKfQplY2hvICc8L3VsPic7CmlmIChpc3NldCgkX0dFVFsnYWN0aW9uJ10pICYmICRfR0VUWydhY3Rpb24nXSA9PT0gJ2VkaXQnKSB7CiAgICAkZmlsZU5hbWUgPSB1cmxkZWNvZGUoJF9HRVRbJ2ZpbGUnXSk7CiAgICBpZiAoaXNfd3JpdGFibGUoJy4vJyAuICRmaWxlTmFtZSkpIHsKICAgICAgICAkZmlsZUNvbnRlbnQgPSBmaWxlX2dldF9jb250ZW50cygnLi8nIC4gJGZpbGVOYW1lKTsKICAgICAgICBlY2hvICc8aDI+57yW6L6R5paH5Lu2OiAnIC4gJGZpbGVOYW1lIC4gJzwvaDI+JzsKICAgICAgICBlY2hvICc8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iP2FjdGlvbj1zYXZlJmZpbGU9JyAuIHVybGVuY29kZSgkZmlsZU5hbWUpIC4gJyI+JzsKICAgICAgICBlY2hvICc8dGV4dGFyZWEgbmFtZT0iY29udGVudCI+JyAuIGh0bWxzcGVjaWFsY2hhcnMoJGZpbGVDb250ZW50KSAuICc8L3RleHRhcmVhPic7CiAgICAgICAgZWNobyAnPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IuS/neWtmCI+JzsKICAgICAgICBlY2hvICc8L2Zvcm0+JzsKICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAnPHA+5paH5Lu25LiN5Y+v5YaZ77yM5peg5rOV57yW6L6R44CCPC9wPic7CiAgICB9Cn0KaWYgKGlzc2V0KCRfUE9TVFsnY29udGVudCddKSAmJiBpc3NldCgkX0dFVFsnYWN0aW9uJ10pICYmICRfR0VUWydhY3Rpb24nXSA9PT0gJ3NhdmUnKSB7CiAgICAkZmlsZU5hbWUgPSB1cmxkZWNvZGUoJF9HRVRbJ2ZpbGUnXSk7CiAgICBpZiAoaXNfd3JpdGFibGUoJy4vJyAuICRmaWxlTmFtZSkpIHsKICAgICAgICAkZmlsZUNvbnRlbnQgPSAkX1BPU1RbJ2NvbnRlbnQnXTsKICAgICAgICBmaWxlX3B1dF9jb250ZW50cygnLi8nIC4gJGZpbGVOYW1lLCAkZmlsZUNvbnRlbnQpOwogICAgICAgIGVjaG8gJzxwPuaWh+S7tuS/neWtmOaIkOWKn+OAgjwvcD4nOwogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICc8cD7mlofku7bkuI3lj6/lhpnvvIzkv53lrZjlpLHotKXjgII8L3A+JzsKICAgIH0KfQppZiAoaXNzZXQoJF9HRVRbJ2FjdGlvbiddKSAmJiAkX0dFVFsnYWN0aW9uJ10gPT09ICdkZWxldGUnKSB7CiAgICAkZmlsZU5hbWUgPSB1cmxkZWNvZGUoJF9HRVRbJ2ZpbGUnXSk7CiAgICBpZiAoaXNfZmlsZSgnLi8nIC4gJGZpbGVOYW1lKSkgewogICAgICAgIGlmICh1bmxpbmsoJy4vJyAuICRmaWxlTmFtZSkpIHsKICAgICAgICAgICAgZWNobyAnPHA+5paH5Lu25Yig6Zmk5oiQ5Yqf44CCPC9wPic7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWNobyAnPHA+5paH5Lu25Yig6Zmk5aSx6LSl44CCPC9wPic7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICc8cD7mlofku7bkuI3lrZjlnKjjgII8L3A+JzsKICAgIH0KfQo
